var timer;function wsss(_0x1e0af9){var _0x2fda7d={'uid':0x0,'roomid':parseInt(_0x1e0af9),'protover':0x1,'platform':'web','clientver':'1.4.0'};console['log'](JSON['stringify'](_0x2fda7d));if(_0x5c2d28){_0x5c2d28['close']();}var _0x5c2d28=new WebSocket('wss://broadcastlv.chat.bilibili.com/sub');_0x5c2d28['onopen']=function(){console['log']('WebSocket\x20已连接上');_0x5c2d28['send'](getCertification(JSON['stringify'](_0x2fda7d))['buffer']);timer=setInterval(function(){var _0x578ece=new ArrayBuffer(0x10);var _0x5a5300=new DataView(_0x578ece);_0x5a5300['setUint32'](0x0,0x0),_0x5a5300['setUint16'](0x4,0x10),_0x5a5300['setUint16'](0x6,0x1),_0x5a5300['setUint32'](0x8,0x2),_0x5a5300['setUint32'](0xc,0x1);_0x5c2d28['send'](_0x5a5300['buffer']);},0x7530);};_0x5c2d28['onclose']=function(){console['log']('连接断开');if(timer!==null){clearInterval(timer);}wsss(_0x1e0af9);};_0x5c2d28['onmessage']=function(_0x11c470){var _0x3e0a86=_0x11c470['data'];decode(_0x3e0a86,function(_0x1878d8){if(_0x1878d8['op']==0x5){for(let _0x578dd5=0x0;_0x578dd5<_0x1878d8['body']['length'];_0x578dd5++){var _0x51cdc8=_0x1878d8['body'][_0x578dd5];if(_0x51cdc8['cmd']=='DANMU_MSG'){ptxx(_0x51cdc8['info'][0x2][0x1],_0x51cdc8['info'][0x1]);}else if(_0x51cdc8['cmd']=='INTERACT_WORD'){jrzb(_0x51cdc8['data']['uname']);}}}});};}var textDecoder=new TextDecoder('utf-8');const readInt=function(_0x1d8711,_0x1ecb74,_0x59a9b8){let _0x1e9e75=0x0;for(let _0x1d5035=_0x59a9b8-0x1;_0x1d5035>=0x0;_0x1d5035--){_0x1e9e75+=Math['pow'](0x100,_0x59a9b8-_0x1d5035-0x1)*_0x1d8711[_0x1ecb74+_0x1d5035];}return _0x1e9e75;};function decode(_0xa78c2e,_0x329301){let _0x15b0c2=new FileReader();_0x15b0c2['onload']=function(_0x25928e){let _0x20beee=new Uint8Array(_0x25928e['target']['result']);let _0x15eab9={};_0x15eab9['packetLen']=readInt(_0x20beee,0x0,0x4);_0x15eab9['headerLen']=readInt(_0x20beee,0x4,0x2);_0x15eab9['ver']=readInt(_0x20beee,0x6,0x2);_0x15eab9['op']=readInt(_0x20beee,0x8,0x4);_0x15eab9['seq']=readInt(_0x20beee,0xc,0x4);if(_0x15eab9['op']==0x5){_0x15eab9['body']=[];let _0x3dac52=0x0;while(_0x3dac52<_0x20beee['length']){let _0x577224=readInt(_0x20beee,_0x3dac52+0x0,0x4);let _0x5200c3=0x10;let _0x31b3f7=_0x20beee['slice'](_0x3dac52+_0x5200c3,_0x3dac52+_0x577224);let _0x353359='{}';if(_0x15eab9['ver']==0x2){_0x353359=textDecoder['decode'](pako['inflate'](_0x31b3f7));}else{_0x353359=textDecoder['decode'](_0x31b3f7);}if(_0x353359){const _0x123584=_0x353359['split'](/[\x00-\x1f]+/);_0x123584['forEach'](_0x3f20b4=>{try{_0x15eab9['body']['push'](JSON['parse'](_0x3f20b4));}catch(_0x330a80){}});}_0x3dac52+=_0x577224;}}_0x329301(_0x15eab9);};_0x15b0c2['readAsArrayBuffer'](_0xa78c2e);}function getCertification(_0x37dc59){var _0x3c34d5=str2bytes(_0x37dc59);var _0x58ff73=new ArrayBuffer(_0x3c34d5['length']+0x10);var _0x1aea2f=new DataView(_0x58ff73);_0x1aea2f['setUint32'](0x0,_0x3c34d5['length']+0x10),_0x1aea2f['setUint16'](0x4,0x10),_0x1aea2f['setUint16'](0x6,0x1),_0x1aea2f['setUint32'](0x8,0x7),_0x1aea2f['setUint32'](0xc,0x1);for(var _0x3bf188=0x0;_0x3bf188<_0x3c34d5['length'];_0x3bf188++){_0x1aea2f['setUint8'](0x10+_0x3bf188,_0x3c34d5[_0x3bf188]);}return _0x1aea2f;}function str2bytes(_0x3e5a08){const _0x3ad210=[];let _0x4603a8;const _0x3b049c=_0x3e5a08['length'];for(let _0x37553b=0x0;_0x37553b<_0x3b049c;_0x37553b++){_0x4603a8=_0x3e5a08['charCodeAt'](_0x37553b);if(_0x4603a8>=0x10000&&_0x4603a8<=0x10ffff){_0x3ad210['push'](_0x4603a8>>0x12&0x7|0xf0);_0x3ad210['push'](_0x4603a8>>0xc&0x3f|0x80);_0x3ad210['push'](_0x4603a8>>0x6&0x3f|0x80);_0x3ad210['push'](_0x4603a8&0x3f|0x80);}else if(_0x4603a8>=0x800&&_0x4603a8<=0xffff){_0x3ad210['push'](_0x4603a8>>0xc&0xf|0xe0);_0x3ad210['push'](_0x4603a8>>0x6&0x3f|0x80);_0x3ad210['push'](_0x4603a8&0x3f|0x80);}else if(_0x4603a8>=0x80&&_0x4603a8<=0x7ff){_0x3ad210['push'](_0x4603a8>>0x6&0x1f|0xc0);_0x3ad210['push'](_0x4603a8&0x3f|0x80);}else{_0x3ad210['push'](_0x4603a8&0xff);}}return _0x3ad210;}